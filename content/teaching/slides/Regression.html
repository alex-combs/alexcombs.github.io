<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>PADP 7120 Data Applications in PA</title>
    <meta charset="utf-8" />
    <meta name="author" content="Alex Combs" />
    <script src="Regression_files/header-attrs-2.5/header-attrs.js"></script>
    <link href="Regression_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
    <script src="Regression_files/anchor-sections-1.0/anchor-sections.js"></script>
    <link rel="stylesheet" href="mypres.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# PADP 7120 Data Applications in PA
## Simple &amp; Multiple Regression
### Alex Combs
### UGA | SPIA | PADP
### Last updated: February 16, 2021

---

# Outline



- Understand the purpose of regression and its relevance to making decisions

- Interpret regression coefficients

- Assess goodness-of-fit for one model or between several competing models

- Understand what it means to control for other variables

---
# Correlation review

.center[
![:scale 60%](lectures_files/infmort_lifeExp.png)
]

- Correlation reports the direction and strength between two variables

- Correlation between infant mortality rate and life expectancy is -0.9; very strong negative correlation

---
# Correlation coefficients


```r
select(States, -region) %&gt;% 
  cor()
```

```
##                pop       SATV       SATM    percent    dollars        pay
## pop      1.0000000 -0.3381028 -0.2300418  0.2100687  0.1436745  0.3677244
## SATV    -0.3381028  1.0000000  0.9620359 -0.8627954 -0.5268313 -0.5559238
## SATM    -0.2300418  0.9620359  1.0000000 -0.8581495 -0.4844477 -0.4853306
## percent  0.2100687 -0.8627954 -0.8581495  1.0000000  0.7111474  0.6630098
## dollars  0.1436745 -0.5268313 -0.4844477  0.7111474  1.0000000  0.8476737
## pay      0.3677244 -0.5559238 -0.4853306  0.6630098  0.8476737  1.0000000
```

---
# Visualizing correlation


```r
ggplot(States, aes(x = dollars, y = SATM)) +
  geom_point() +
  labs(x = 'Public ed spending in $1000s per student',
       y = 'Average SAT Math score')
```

&lt;img src="Regression_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;

---
# Correlation conclusions

&lt;img src="Regression_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;

- States that spend more on public education tend to have lower average SAT Math scores among its graduating high school students

- The strength of the relationship is moderate at -0.48

---
# Basic purpose of regression

.pull-left[
![](Regression_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;
]

.pull-right[
- Regression gives us direction, strength, and magnitude of association
- Draws the line of **best fit** through a set of paired x-y data points
- The slope of the line tells us the **average, predicted change in y given a change in x**
- At any value along x-axis, regression line gives us the **predicted value of y**
]

---
# Basic purpose of regression

- Regression is a statistical method to
  - **Explain** the relationship between an outcome variable and one or more explanatory variables, and/or
  - **Predict** the value of an outcome given the value(s) of one or more explanatory variables

- Either way, regression is a way of modeling an outcome `\(y\)` as a function of explanatory `\(x\)`

---
# Adding a regression line


```r
ggplot(States, aes(x = dollars, y = SATM)) +
  geom_point() +
* geom_smooth(method = 'lm', se = FALSE) +
  labs(x = 'Public ed spending in $1000s per student',
       y = 'Average SAT Math score')
```

&lt;img src="Regression_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

---
# Simple linear regression model

.pull-left[
`$$y=\beta_0+\beta_1x+\epsilon$$`

- `\(y\)` referred to as the outcome, response, dependent variable
- `\(\beta_0\)` (beta-naught) is the y-intercept constant
- `\(\beta_1\)` is the slope of the regression line; the marginal effect of `\(x\)` on `\(y\)`
- `\(x\)` referred to as explanatory, independent variable
- `\(\epsilon\)` is referred to as the error term or random noise
]

--

.pull-right[
- This is a **population** model. 
- The `\(\beta\)`s are **population parameters** we wish to estimate, assuming we don't observe the entire population.
- `\(\epsilon\)` is also a parameter that captures all the other factors that affect `\(y\)` for which we cannot include in our model
]

---
# Simple linear regression model

.pull-left[
`$$\hat{y}=b_0+b_1x$$`

- `\(\hat{y}\)` is the **predicted** value of `\(y\)` given a value of `\(x\)`
- `\(b_0\)` is the estimate of `\(\beta_0\)`; our prediction of `\(y\)` if `\(x\)` equaled 0
- `\(b_1\)` is the estimate of `\(\beta_1\)`; our predicted slope; our predicted marginal effect of `\(x\)` on `\(y\)`
- the `\(b\)`s are often referred to as **coefficients**
]

--

.pull-right[
- This is our sample regression equation based on the population model
]

---
# Interpreting Regression Results

`$$\hat{y}=b_0+b_1x$$`

On average, a [one] [unit] [increase/decrease] in `\(x\)` [is associated with] a [increase/decrease] of `\(b_1\)` [units] in `\(y\)`.

--

- [one] can be any number
- Replace [unit] with the actual units of the `\(x\)` variable (e.g. dollars, percentage point, count of houses)
- Replace `\(x\)` with what `\(x\)` is
- [is associated with] can be any combination of words that expresses the intended relationship (causes, results in)
- Replace `\(b_1\)` with the estimate from the results
- Replace [units] with the units of the `\(y\)` variable
- Replace `\(y\)` with what `\(y\)` is

---
# Example: Population to sample models

- Suppose we want to model average SAT math scores, `SATM`, in a state as a function of its spending on public education in **1000s per student**, `dollars`

`$$SATM=\beta_0+\beta_1Dollars+\epsilon$$`

--

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 560.374 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.801 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33.353 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 526.610 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 594.137 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dollars &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -12.169 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.139 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -3.876 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -18.478 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -5.860 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--

`$$\hat{SATM} = 560 - 12 \times Dollars$$`

---
# Example: Reporting results

`$$\hat{SATM} = 560 - 12 \times Dollars$$`

On average, a one thousand dollar increase in state spending on public education per student is associated with a 12 point decline in average SAT math scores.

--

Results suggest each additional thousand dollars spent on public education per student decreases average SAT math scores by 12 points, on average.

--

If states increased spending by $5,000 per student, SAT math scores are predicted to decrease 60 points, on average.

--

If states spent nothing on public education, SAT math scores are predicted to be 560, on average.

---
# Many ways to interpret

- Regression results can be applied to countless scenarios
- Any scenario involves either 
  - a predicted *change* in `\(y\)` given a *change* in `\(x\)` or 
  - a predicted *value* of `\(y\)` given a *value* of `\(x\)`

--

- Run regression, plug coefficients into equation, plug scenario into equation, then solve.

---
# Predicted Change vs. Predicted Value

- Now `SATM` as a function of the percent of graduating high school students who take the SAT, `percent`

`$$SATM=\beta_0+\beta_1Percent+\epsilon$$`
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 538.975 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.351 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 123.870 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 530.231 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 547.719 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; percent &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.232 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.105 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -11.701 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.444 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.021 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

`$$\hat{SATM} = 539 - 1.2 \times Percent$$`

- Now we can consider any hypothetical *change* in percent or specific *value* of percent and provide a prediction for SAT math scores.

---
# Change vs. value
`$$\hat{SATM} = 539 - 1.2 \times Percent$$`
.pull-left[
What if percent taking SAT increased from 50% to 55%?

```r
-1.2*5
```

```
## [1] -6
```
SAT math is predicted to **decrease** 6 points, on average.
]

--

.pull-right[
What is the predicted average SAT math score for a state where 75% of high school graduates take the SAT?

```r
539 - 1.2*75
```

```
## [1] 449
```

Average SAT math is predicted to **equal** 449, on average.
]

---
# You practice

`$$\hat{SATM} = 539 - 1.2 \times Percent$$`

- What is the predicted average SAT math score in a state where 25% of its high school graduates take the SAT?
- What is the predicted average SAT math score in a state where 100% of its high school graduates take the SAT?
- What is the predicted change in average SAT math score in a state where the percent of high school graduates taking the SAT increases 75 percentage points?

---
class: inverse, middle, center

# Make sure you understand the difference between a percent change and a percentage point change.

---
# Percent vs. percentage point change

- Linear regression involves **unit changes** (for now)

- A unit change of a variable expressed in percentages is a **percentage point** change

- Increase from 25% to 100% is an increase of 75 percentage points

---
# Percent vs. percentage point change

- Percent change conveys the percent of the old number it takes to get to the new number

$$ \%\Delta = (\frac{New-Old}{Old}) \times 100$$
- An increase from 25% to 100% is a 300% increase.


```r
((100-25)/25)*100
```

```
## [1] 300
```

---
class: inverse, middle, center

# Running regressions in R

---
# Running regression

- Explore data


```r
glimpse(States)
```

```
## Rows: 51
## Columns: 7
## $ region  &lt;fct&gt; ESC, PAC, MTN, WSC, PAC, MTN, NE, SA, SA, SA, SA, PAC, MTN, E…
## $ pop     &lt;int&gt; 4041, 550, 3665, 2351, 29760, 3294, 3287, 666, 607, 12938, 64…
## $ SATV    &lt;int&gt; 470, 438, 445, 470, 419, 456, 430, 433, 409, 418, 401, 404, 4…
## $ SATM    &lt;int&gt; 514, 476, 497, 511, 484, 513, 471, 470, 441, 466, 443, 481, 5…
## $ percent &lt;int&gt; 8, 42, 25, 6, 45, 28, 74, 58, 68, 44, 57, 52, 17, 16, 54, 5, …
## $ dollars &lt;dbl&gt; 3.648, 7.887, 4.231, 3.334, 4.826, 4.809, 7.914, 6.016, 8.210…
## $ pay     &lt;int&gt; 27, 43, 30, 23, 39, 31, 43, 35, 39, 30, 29, 32, 25, 34, 32, 2…
```

---
# Running regression


```r
summary(States)
```

```
##      region        pop             SATV            SATM          percent     
##  SA     : 9   Min.   :  454   Min.   :397.0   Min.   :437.0   Min.   : 4.00  
##  MTN    : 8   1st Qu.: 1215   1st Qu.:422.5   1st Qu.:470.0   1st Qu.:11.50  
##  WNC    : 7   Median : 3294   Median :443.0   Median :490.0   Median :25.00  
##  NE     : 6   Mean   : 4877   Mean   :448.2   Mean   :497.4   Mean   :33.75  
##  ENC    : 5   3rd Qu.: 5780   3rd Qu.:474.5   3rd Qu.:522.5   3rd Qu.:57.50  
##  PAC    : 5   Max.   :29760   Max.   :511.0   Max.   :577.0   Max.   :74.00  
##  (Other):11                                                                  
##     dollars           pay       
##  Min.   :2.993   Min.   :22.00  
##  1st Qu.:4.354   1st Qu.:27.50  
##  Median :5.045   Median :30.00  
##  Mean   :5.175   Mean   :30.94  
##  3rd Qu.:5.689   3rd Qu.:33.50  
##  Max.   :9.159   Max.   :43.00  
## 
```

---
# Running regression


```r
satm_mod1 &lt;- lm(SATM ~ dollars, data = States)
satm_mod2 &lt;- lm(SATM ~ percent, data = States)
```


```r
library(moderndive)
get_regression_table(satm_mod1)
```

|term      | estimate| std_error| statistic| p_value| lower_ci| upper_ci|
|:---------|--------:|---------:|---------:|-------:|--------:|--------:|
|intercept |  560.374|    16.801|    33.353|       0|  526.610|  594.137|
|dollars   |  -12.169|     3.139|    -3.876|       0|  -18.478|   -5.860|

---
# Running regression

- Alternative: `summary` available by default; not as pretty


```r
summary(satm_mod1)
```

```
## 
## Call:
## lm(formula = SATM ~ dollars, data = States)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -70.72 -17.85  -1.98  16.48  75.51 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  560.374     16.801  33.353  &lt; 2e-16 ***
## dollars      -12.169      3.139  -3.876 0.000315 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 30.55 on 49 degrees of freedom
## Multiple R-squared:  0.2347,	Adjusted R-squared:  0.2191 
## F-statistic: 15.03 on 1 and 49 DF,  p-value: 0.0003155
```

---
# Recap of population and sample regressions

**Population Model**

`$$y=\beta_0+\beta_1x+\epsilon$$`

`$$SATM=\beta_0+\beta_1Dollars+\epsilon$$`

**Sample Model**

`$$\hat{y}=b_0+b_1x$$`
`$$\hat{SATM} = 560 - 12 \times Dollars$$`

---
class: inverse, center, middle

# What happens to that error term, `\(\epsilon\)`, when we move to the sample model?

---
# The residual

`$$e=y-\hat{y}$$`

- The residual is the difference between the *observed* outcome `\(y\)` and the *predicted* outcome `\(\hat{y}\)` in our regression model

- The residual is the sample statistic of the population parameter `\(\epsilon\)`




&lt;img src="Regression_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;

---
# How to examine residuals


```r
get_regression_points(satm_mod1)
```

- Regression results for each observation

- Shows observed data, predicted outcomes, and residuals

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; ID &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SATM &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; dollars &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SATM_hat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; residual &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 514 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.648 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 515.980 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.980 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.887 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 464.395 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.605 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 497 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.231 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 508.886 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -11.886 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 511 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.334 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 519.802 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -8.802 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 484 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.826 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 501.645 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -17.645 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 513 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.809 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 501.852 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.148 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
class: inverse, center, middle

# Regression draws the line of best fit through observed x-y pairs. What does best fit mean?

---
# Ordinary least squares (OLS)

- Standard regression is also known as OLS

- Regression uses math you don't need to worry about to determine the intercept and slope of a line that **minimizes the sum of squared residuals (SSR)**

---
# OLS

.pull-left[
![](Regression_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;
]

.pull-right[
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; ID &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SATM &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SATM_hat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; residual &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 514 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 515.980 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.980 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 464.395 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.605 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 497 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 508.886 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -11.886 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 511 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 519.802 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -8.802 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 484 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 501.645 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -17.645 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 513 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 501.852 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.148 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 471 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 464.067 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.933 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 470 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 487.164 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -17.164 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---
# OLS

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; ID &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SATM &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; dollars &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SATM_hat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; residual &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sq_resid &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 514 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.648 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 515.980 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.980 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.9204 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.887 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 464.395 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.605 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 134.6760 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 497 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.231 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 508.886 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -11.886 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 141.2770 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 511 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.334 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 519.802 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -8.802 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77.4752 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


```r
sum(satm_mod1_points$sq_resid)
```

```
## [1] 45727.36
```

- No other line will achieve a sum of squared residuals less than 45,727

---
class: inverse, middle, center

# But how good is the best?

---
# Goodness-of-fit

- Any outcome varies across observations (i.e. variance)

- When we ask how good is our best regression line, one way to answer is the **percent of total variation/variance in the outcome that is explained by our model**

--

- `\(R^2\)` (r-squared)
  - Ranges from 0 to 1
  - The percent of variation in `\(y\)` explained by our regression

---
# Goodness of fit


```r
get_regression_summaries(satm_mod1)
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; adj_r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; rmse &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sigma &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.219 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.94355 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30.549 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

The regression using dollars explains 24% of total variation in average SAT math scores.

---
# Goodness of fit

```r
get_regression_summaries(satm_mod2)
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; adj_r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; rmse &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sigma &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.736 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.731 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.57277 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.928 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- What percent of variation in average SAT math scores is explained by model 2?

--

- 74%

--

- Model 2 has the highest `\(R^2\)`, thus it is the *statistically* superior model

---
# Goodness of fit


```r
select(States, SATM, dollars, percent) %&gt;% 
  cor()
```

```
##               SATM    dollars    percent
## SATM     1.0000000 -0.4844477 -0.8581495
## dollars -0.4844477  1.0000000  0.7111474
## percent -0.8581495  0.7111474  1.0000000
```


```r
-0.48^2
```

```
## [1] -0.2304
```

```r
-0.86^2
```

```
## [1] -0.7396
```

---
# Goodness of fit

.pull-left[
&lt;img src="Regression_files/figure-html/unnamed-chunk-32-1.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="Regression_files/figure-html/unnamed-chunk-33-1.png" style="display: block; margin: auto;" /&gt;
]

---
# Goodness of fit

- `\(R^2\)` isn't very useful for a general audience and it has limited practical application for predictions.

--

- Root mean squared error (**RMSE**) answers the question: "How far off is our model, on average, from observed outcomes? If we predict an outcome, what is the typical range of inaccuracy?

--

- RMSE is the regression version of standard deviation; provides the average deviation from the regression line

- The lower the RMSE the better our model is at fitting the data

---
# Goodness of fit
Model 1 using dollars
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; adj_r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; rmse &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sigma &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.219 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.94355 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30.549 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

Model 2 using percent
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; adj_r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; rmse &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sigma &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.736 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.731 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.57277 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.928 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--

- Model 1 predictions are off by about 30 points, on average.
- Model 2 predictions are off by about 18 points, on average.
- Model 2 is the *statistically* superior model.

---
class: inverse, center, middle

# Multiple regression

---
# Multiple regression

- Multiple regression adds more than one explanatory variable to the model. 

--

**Population model**
`$$y=\beta_0+\beta_1x_1+\beta_2x_2+\dots+\beta_kx_k+\epsilon$$`

**Sample model**
`$$\hat{y}=b_0+b_1x_1+b_2x_2+\dots+b_kx_k$$`

--

- This isolates the association between the outcome and each explanatory variable, holding all other variables constant.

---
# Controlling for other factors

- The two previous regressions each controlled for one variable we might theorize affects average state SAT math scores

--

- There is any number of additional variables contained in the error term `\(\epsilon\)`

--

- Typically, if we can, we should include those additional variables in the same regression model

- Especially if those variables affect the explanatory variables currently in our model

---
class: inverse, center, middle

# Importance of theory or subject-matter expertise

---
# Making sense of our results

- So far, states spending more on public education apparently tend to have lower SAT math scores; may seem counter-intuitive to some

--

- We also see that states with a higher percent of graduates taking the SAT tend to have lower SAT math scores

--

- What may be going on here?

---
# Making sense of our results

&lt;img src="Regression_files/figure-html/unnamed-chunk-36-1.png" style="display: block; margin: auto;" /&gt;

---
# Controlling for other factors

- Multiple regression provides the marginal effect of `\(x_k\)` on `\(y\)`, while holding all other `\(x\)`s constant at their respective mean

**Interpretation**

On average, a [one-unit] [increase/decrease] in `\(x_k\)` [is associated with] a `\(b_k\)` [unit] [increase/decrease] in `\(y\)`, [**holding other factors constant].**

- Variations on last part:
  - all else equal
  - controlling for other factors
  - *ceteris paribus*

---
# Running multiple regression

`$$SATM=\beta_0+\beta_1Dollars+\beta_2Percent+\epsilon$$`


```r
satm_mod3 &lt;- lm(SATM ~ dollars + percent, data = States)
```

```r
get_regression_table(satm_mod3)
```
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 514.652 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.299 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49.969 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 493.944 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 535.360 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dollars &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.395 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.482 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.577 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.013 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.405 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.384 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; percent &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.492 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.142 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -10.519 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.777 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.207 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

`$$SATM=515+6.4 \times Dollars - 1.5 \times Percent+\epsilon$$`

---
# Interpreting results

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 514.652 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.299 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49.969 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 493.944 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 535.360 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dollars &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.395 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.482 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.577 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.013 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.405 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.384 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; percent &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.492 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.142 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -10.519 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.777 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.207 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

`$$SATM=515+6.4 \times Dollars - 1.5 \times Percent+\epsilon$$`

- Controlling for the percent of graduates taking the SAT, what is the predicted change in SAT math scores if states increase public education spending by $5,000 per student?

--


```r
6.4*5
```

```
## [1] 32
```

---
# Interpreting results

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 514.652 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.299 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49.969 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 493.944 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 535.360 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dollars &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.395 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.482 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.577 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.013 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.405 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.384 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; percent &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.492 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.142 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -10.519 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.777 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -1.207 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

`$$SATM=515+6.4 \times Dollars - 1.5 \times Percent+\epsilon$$`

What is the predicted average SAT math score for a state that spends $5,000 per student, and has 50% of high school graduates take the SAT?

--


```r
515 + 6.4*5 - 1.5*50
```

```
## [1] 472
```

---
class: inverse, middle, center

# Connecting results to policy decisions

---
# Policy Decision

- We haven't covered enough material to know whether or how we should act on this information, but let's work with what we know so far

  - Let's ignore matters of inference
  
  - Let's assume these results are causal

--

- That said, so far:

  - Spending increases average SAT math scores among states, *controlling for percent of high school grads taking SAT*
  
  - But spending seems to increase the percent of SAT participation, which then decreases average SAT math scores

- Let's examine the effect of spending on SAT math scores

---
# Spending and SAT participation


```r
satm_mod4 &lt;- lm(percent ~ dollars, data = States)
```


```r
get_regression_table(satm_mod4)
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -30.64 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.403 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -3.259 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -49.536 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -11.744 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dollars &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.757 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.081 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.910 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.971 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- A $1,000 increase in spending per pupil increases the percent of grads taking the SAT by 12.4 *percentage points*.

---
# Policy Decision

- A $1,000 increase in spending per student:
  
  - Directly increases average SAT math scores 6.4 points
  
  - Directly increases participation 12.4 percentage points
  
  - Increase of 12.4 p.p. reduces average SAT math scores 18.6 points
  
- The total effect of a $1,000 increase on average SAT math scores is about -12.2 points. Same as first model.

--

- What should be our policy recommendation?

---
class: inverse, middle, center

# Goodness-of-fit with multiple regression

---
# Goodness-of-fit

**Model 2 using only percent**
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; adj_r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; rmse &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sigma &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.736 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.731 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.57277 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.928 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

**Model 3 using dollars and percent**

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; adj_r_squared &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mse &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; rmse &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sigma &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.768 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.759 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 271.2768 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.47048 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.977 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- Based on `\(R^2\)`, model 3 appears to be the better model, however...

---
# Goodness of fit

- `\(R^2\)` mechanically increases as you add more variables whether or not they improve the model

- Therefore, we should not use `\(R^2\)` to compare models with different numbers of explanatory variables

--

- Adjusted `\(R^2\)` accounts for this, adjusting based on how useful each additional variable is at explaining the outcome

- Model 3 still has the higher adjusted `\(R^2\)` so it remains the statistically better model

- And the RMSE agrees; virtually always the case
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"countIncrementalSlides": false,
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
