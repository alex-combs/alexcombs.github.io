---
title: "PADP 7120 Data Applications in PA"
subtitle: "RLab 1: Intro to R"
author: "Alex Combs"
institute: "UGA | SPIA | PADP"
date: "Last updated: `r format(Sys.time(), '%B %d, %Y')`"
output:
  xaringan::moon_reader:
    css: 'mypres.css'
    nature:
      beforeInit: "macros.js"
      highlightStyle: github
      countIncrementalSlides: false
---
# Objectives

By the end of this lab, you will learn how to...

- open and navigate R
- start an R project to organize your work
- load data already formatted for R
- load R packages
- use R markdown and run code
- export your R markdown document to HTML

---
# RLab Conventions

- Bullets denote background, instructions, etc.

- Block quote in bold like below denotes a prompt

> **Do this thing in this block**

- Example code is in blocks like below

```{r, eval=FALSE}
summary(cars)
```

- Or `in-line code like this`
---
# RLab Process

- Not recommended that you work ahead even if you are waiting for others to catch up

- Highly likely that you will encounter errors; this is normal
  - If so, **STOP ME**
  - Be prepared to share your screen
  - Troubleshooting can help you and others learn
  - Observers are encouraged to offer suggestions

---
# Starting R

- Once R and RStudio are installed on your computer

> **Launch RStudio**

- Should see 3 Panes
  - Console (left)
  - Environment (top-right)
  - Files and other tabs (bottom-right)

---
# File Directory

> **Type `getwd()` into the console (bottom-left pane) and hit Enter**

- R should return the current file path, such as "/Users/alexcombs/Documents/"

- When you tell R to look for or save a file, this is the location R uses

- We want a separate folder for each project/assignment that holds all relevant data and documents

---
# R Projects

- R Projects are the best way to organize your work

- Creates a folder for R to work from

--

- I will now demonstrate how to start an R Project

--

> **Create a project called "rlab1" in a file location of your choice**

--

- All of our R Labs will begin with this process

- R Demo 1 on eLC demonstrates this process in case you forget

---
# Importing CSV data

- Certain software uses file extensions like `.xlsx` for Excel

- A data file that is already formatted for R has the extension `.RData` or `.rds`

- A `.csv` file can be opened by virtually any software

--

> **Download the file titled "states1.csv" on eLC. Leave it wherever your computer saved it (probably your Downloads folder). In your console, type:**

--

```{r, eval=FALSE}
library(tidyverse) # Need to have installed tidyverse
states1 <- read_csv("states1.csv")
```

- You must use quotes (single or double) anytime you tell R to load or save a file

---
# Our first error (hopefully)

- Should now see an error message like the one below

```{r, eval=FALSE}
Error in load(states1.RData) : object 'states1.csv' not found
Calls: <Anonymous> ... withCallingHandlers -> withVisible -> eval -> eval -> load
Execution halted
```

- R tries to tell you what went wrong in the error message

---
# Moving a file to our project

- Remember, R looks for files in your project folder

- R is saying it can't find the file we just told it to import

- I will now demonstrate moving a file to my project folder

--

> **Using your computer's file manager, move states1.csv to your project folder**

> **Now re-run `states1 <- read_csv("states1.csv")` command**

---
# Data in your R session

- The environment pane (top-right) will list all data currently loaded

- You should see `states1` in your environment pane

- You can click the dropdown arrow to see a list of variables

- Or click on `states1` to see the data in spreadsheet format

---
# Starting an R Markdown Document

- R Markdown: allows you to fluidly combine content and code to export to all sorts of things [video](https://rmarkdown.rstudio.com/lesson-1.html)

- We will use R Markdown documents exclusively in this course

--

- I will now demonstrate how to start an R Markdown (.Rmd) document.

--

> **Start an R Markdown (.Rmd) document.**

- Let's review the template. It is informative.

---
# Knit

- Knit refers to taking the combination of text and code and knitting it into a HTML, PDF, Word doc, etc.

- Should see a knit button at the top of the editor pane. Clicking it will knit your document.

- Every time you knit, R saves your document
  
--

> **Knit your Rmd document. Name it "test"**

---
# YAML header

- The YAML header tells R how to format the output

> **Change the YAML to the following:**

```{r, eval=FALSE}
---
title:  'Test'
author: 'Your Name'
output: html_document
---
```

> **Knit to HTML again**

---
# Code Chunks

- Code chunks separate text from R code

- To add a code chunk, you can point-and-click or use the keyboard shortcut `Cmd+Opt+I`

- I will now demonstrate inserting a code chunk and typing some arbitrary arithmetic

--

> **At the bottom of your Rmd, insert a code chunk and type some arbitrary arithmetic inside it. Click `Enter` a few times and type another line of arithmetic.**

---
# Running Code Chunks

- Several options to run code in an Rmd

- To run a particular code chunk, click on the play button. This runs ALL of the lines of code in the chunk.

- To run a single line of code, place your cursor on that line and click `Cmd+Enter`

- To run multiple code chunks, use the Run menu at the top of the editor pane

---
# Objects

- Objects are anything you tell R to temporarily save during a session. A dataset, a number, a list of numbers, etc.

- You can save any object to your computer or delete it when you close R. Deleting is fine as long as you saved the code that created the object(s).

- You should already have an object `states1`

---
# Creating an object

> **Add `x <-` to the second line of arbitrary arithmetic in your code chunk like below. Run the code chunk.**

```{r}
x <- ((5+5)/2)^2
```

--

- The `<-` symbol is called the **assignment operator**. It tells R to save the result of the thing on the right side as the name on the left side.

- The keyboard shortcut for the assignment is `Alt-` on PC or `Option-` on Mac.

---
# Why save an object?

- We create an object whenever we want to use it later in the Rmd or save it as a file.

- Suppose you want to know what `x^2` equals.

- You don't need to recreate `x`. You can just square `x` like below.

```{r}
x^2
```

- This becomes very useful when working with multiple datasets, or changing an original dataset

---
# Creating an object

> **Insert another code chunk. Add and run the following code:**

```{r, eval=FALSE}
states2 <- select(states1, state, pop_1990)
```

- Now we have two datasets. We can use states2 for whatever we needed it for while preserving states1 if we need that too.

--

> **Knit your Rmd again.**

---
# Our second error

- R cannot find function `select`. But it worked when we ran the line of code.

- When you knit, R runs the code from beginning-to-end and ignores anything you did in the console to load a package or import data.

- If a code chunk in your Rmd depends on something you did in the console, your Rmd won't knit unless we include that code in the Rmd

--

> **In the first code chunk of your Rmd, add a new line of code: `library(tidyverse)`. Try to knit again.**

---
# Our third error

- R can't find object `states1`, but `states1` is in our environment.

- What is the problem?

--

> **Add `states1 <- read_csv("states1.csv")` in the first code chunk BELOW loading tidyverse because read_csv depends on tidyverse. Try to knit again.**

---
# Returning to a project

> **Since you just knitted, everything is saved. Close RStudio.**

- To return to a project, you can open the .Rproj file in your project folder. 
- RStudio should open right where you left off.

---
class: inverse, middle, center

# Let's create our first RLab and upload to eLC

---
# Starting RLab1

> **Download the file "rlab1_profile" from eLC and add to your "rlab1" project folder**

> **Rename the file "firstname_lastname_profile"**

> **Complete the instructions in the "rlab1_profile" until you reach the section titled "Some of my R skills"**

---
# Some of my R skills

- Under "I know how to include and execute code chunks."

> **Add a code chunk** 

> **Inside the code chunk, write some arbitrary math**

> **Assign the result to an object named `math`**

---
# Some of my R skills

- Under "I know how to load an R package."

> **Add another code chunk**

> **Write code that will load the tidyverse package**

---
# Some of my R skills

- Under "I know how to import a data set."

> **Add another code chunk**

> **Write code that will import states1.csv**

---
# Some of my R skills

- Under "I know one way to print a data set."

> **Add another code chunk and add the following code**

```{r, eval=FALSE}
states1
```

> **Knit your Rmd.**

---
# Upload to eLC

> **Upload your Rmd file to the RLab1 assignment dropbox on eLC.**
