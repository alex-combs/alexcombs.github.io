---
title: "PADP 7120 Data Applications in PA"
subtitle: "RLab 1: Intro to R"
author: "Alex Combs"
institute: "UGA | SPIA | PADP"
date: "August 26, 2020"
output:
  xaringan::moon_reader:
    css: 'mypres.css'
    nature:
      beforeInit: "macros.js"
      highlightStyle: github
      countIncrementalSlides: false
---
# Objectives

By the end of this lab, you will have learned how to...

- open and navigate R
- start a R project to organize your work
- load data already formatted for R
- load R packages
- start 3 common types of editing documents
- write and format prose in an R notebook and run code
- export your work to HTML

---
class: inverse, middle, center

# RLab1: Introduction to R and R Workflow

---
# Starting R

- You need to have R and RStudio installed on your computer

- Launch RStudio

- Let's understand what we're looking at

- 3 Panes
  - Console
  - Environment
  - Files (and other tabs)

---

# File Directory

- Type `getwd()` into the console (bottom-left pane) and hit `Enter`

- When you tell R to look for or save a file, this is the location R uses

---
# R Projects

> R Projects are the best way to organize your work

- Let's learn how to create an R Project

- Our objective is to create a project called `RLAB1` in a file location of our choice

--

- `R Demo 1` on eLC walks you through it in case you forget how

---
# Opening data already formatted for R

- Download the file titled `states1.RData` on eLC. Leave it wherever your computer saved it (probably your `Downloads` folder)

- Type `load('states1.RData')` in the console and hit `Enter`
  - Remember to use quotes when telling R to load or save files

--

```{r, eval=FALSE}
Error in load(states1.RData) : object 'states1.RData' not found
Calls: <Anonymous> ... withCallingHandlers -> withVisible -> eval -> eval -> load
Execution halted
```

--

- Remember, R looks for files in your project folder

- You can include the file path `load(folder/folder/states1.RData)`

- Or you can move the file to your project folder and the previous code should work

---
# Starting a document

- RStudio can output several types of files, such as
  - PDF
  - Word
  - HTML for websites or files that open in your browser

--

- Any of the above start with editing one of several R documents
  - Script - bare bones to run code
  - RMarkdown - allows to make all sorts of things [video](https://rmarkdown.rstudio.com/lesson-1.html)
  - Notebook - same as RMarkdown but interactive so we can run code and see results in real time.
  
---

# Scripts

- Open a script

- If all you need is to run some code without caring about a finished document, then use scripts

- Scripts support two elements:
  - Code
  - Comments (use a hashtag `#` so R knows what is a comment)
  
```{r}
# This is a comment. Below is an arbitrary formula.
((5+5)/2)^2
```

---
# Objects

- Objects are anything you tell R to temporarily save during a session, which can also be permanently saved if you tell R to do so. The environment pane keeps a list of your objects. 

- You should already have an object `states1`

- You can click on an object to see what it contains or use the drop down toggle (if it is a dataset)

---
# Creating an object

- Let's create another object using the code below

```{r}
x <- ((5+5)/2)^2
```

- The `<-` symbol is called the assignment operator. It tells R to save the result of the thing on the right side as the name on the left side.

- The keyboard shortcut for the assignment is `Alt-` on PC or `Option-` on Mac.

- You can view all keyboard shortcuts via the Help menu

---
# Why save an object?

- We create an object whenever we want to use something for later or save it as a file.

- Suppose `x` is *super* interesting but your boss wants to know what `x` is squared.

- You don't need to recreate `x`. You can just square `x`.

```{r}
x^2
```

```{r}
xsquared <- x^2
```

```{r}
xsquared
```

---
# R Notebook

- We will usually use notebooks in this class

- Start a notebook--the template is informative

- The R Markdown cheatsheet is more informative
  - Go to Help->Cheatsheets->R Markdown Cheat Sheet
  
- Let's add a few generic headers to the template just to make some changes

---
# Knitting a notebook

- Knit the template to HTML 
  - Keyboard shortcut: `Cmd+Shift+K`
  - Or click on the `Knit` button at the top of your notebook (might display as `Preview` at first)

- Name the notebook `test` when R asks you to save it

- You should see two new files in your `files` pane (bottom-right) titled `test.Rmd` and `test.html`

- Click on `test.html` and select `open in browser`

---
# YAML header

- The YAML header tells R how to format the output

- Change the YAML to the following

```{r, eval=FALSE}
---
title:  'Test'
author: 'Your Name'
output: html_document
---
```

- Knit to HTML again

---
class: inverse, middle, center

# Let's create our first RLab notebook and upload to eLC

---
# RLAB1 Notebook

- Download the file `RLab1_Profile` on eLC and add to your `RLab1` project folder

- Rename the file `FirstName_LastName_Profile`

- Complete the instructions in the `RLab1_Profile` until you reach the competencies section

---
# Competencies

The National Association of Schools of Public Affairs and Administration (NASSPA) promotes six competencies in methods. Rate yourself on these competencies using the following scale:

1. Not familiar enough with the topic to rate myself
2. I have some competency but need improvement to achieve professional goals
3. Do not need improvement to achieve professional goals
4. Not to brag, but I'm basically an expert

---
# Adding code chunks

- Add a code chunk that executes some basic arithmetic

- Save the result to an object called `math`

---
# Packages

R loads with a lot of base functionality, but some things we want to do requires us to install or load additional packages into our R session. A package is simply a set of functions that augments the base functionality of R.

> Very important: Your notebook won't knit if you use code that requires a package that you haven't loaded inside of your notebook.

--

- Try this code:

```{r, eval=FALSE}
kable(states1)
```

```{r, eval=FALSE}
Error in kable(states1) : could not find function "kable"
```

---
# Loading packages

To load a package, it has to be installed on your computer. You only need to install a package once.

- Let's install the `knitr` package that contains the `kable` function

- Execute the following code in your **console**

```{r, eval=FALSE}
install.packages(kable)
```

- Once installed, now we can load a package. Add this code to your notebook.

```{r}
library(knitr)
```

---
# Printing a table

- Add another code chunk

- Load the `states1` data

```{r, eval=FALSE}
load("states1.RData")
```

- Now try knitting to HTML

---
# Knitting in order

> Your notebook knits in the order of your code chunks. If you use a function on data that you load **below** the function, it's the same as not having the data loaded.

> If a code chunk depends on another chunk, then the latter needs to be done before the former.

--

- Copy-and-paste the `load` chunk above the `kable` chunk.

- Knit to HTML again. Does it work?

---
# Upload to eLC

- Upload your notebook (.Rmd file) and output (.html file) to the RLabs assignment dropbox on eLC
