---
title: "PADP 7120 Data Applications in PA"
subtitle: "RLab 1: Intro to R"
author: "Alex Combs"
institute: "UGA | SPIA | PADP"
date: "August 26, 2020"
output:
  xaringan::moon_reader:
    css: 'mypres.css'
    nature:
      beforeInit: "macros.js"
      highlightStyle: github
      countIncrementalSlides: false
---
# Objectives

By the end of this lab, you will learned how to...

- open and navigate R
- start a R project to organize your work
- load data already formatted for R
- load R packages
- use R markdown and run code
- export your R markdown document to HTML

---
# RLab Conventions

- Bullets denote background, instructions, etc.

- Block quote in bold like below denotes a prompt

> **Do this thing in this block**

- Example code is in blocks like below or this `in-line code`

```{r, eval=FALSE}
summary(cars)
```

---
# RLab Process

- Not recommended that you work ahead even if you are waiting for others to catch up

- Highly likely that you will encounter errors; this is normal
  - If so, **STOP ME** with your voice or a Zoom icon like raised hand or stop sign
  - Be prepared to share your screen
  - Troubleshooting can help you and others learn
  - Observers are encouraged to offer suggestions

---
# Starting R

- Once R and RStudio are installed on your computer

> **Launch RStudio**

- Should see 3 Panes
  - Console (left)
  - Environment (top-right)
  - Files and other tabs (bottom-right)

---
# File Directory

> **Type `getwd()` into the console (bottom-left pane) and hit Enter**

- Should now see a printout of the current file path; for example

- "/Users/alexcombs/Documents/"

- When you tell R to look for or save a file, this is the location R uses

- We usually want to separate folder for each project/assignment to hold all of our data and documents

---
# R Projects

- R Projects are the best way to organize your work

- Creates a folder for R to work from during the current session

--

- I will now demonstrate how to start an R Project

--

> ** Now create a project called "rlab1" in a location of your choice**

--

- All of our R Labs will begin with this process

- R Demo 1 on eLC demonstrates this process in case you forget how

---
# Loading data already formatted for R

- Certain software uses certain file extensions like `.xlsx` for Excel

- A data file that is already formatted for R has the extension `.RData`

--

> **Download the file titled "states1.RData" on eLC. Leave it wherever your computer saved it (probably your Downloads folder)**

--

> **Type `load('states1.RData')` in the console and hit `Enter`**

- Remember you must use single or double quotes anytime you tell R to do something with a file

---
# Our first error

- Should now see an error message like the one below

```{r, eval=FALSE}
Error in load(states1.RData) : object 'states1.RData' not found
Calls: <Anonymous> ... withCallingHandlers -> withVisible -> eval -> eval -> load
Execution halted
```

- Be sure to read error messages; R tries to tell you what went wrong

--

- Remember, R looks for files in your project folder

- R is saying it can't find the file we just told it to load

> **Using your computer's file manager, move states1.RData to your project folder**

> **Now try to execute the load**

---
# Data in your R session

- The environment pane (top-right) will list all data and any other objects currently loaded

- You should see `states1` in your environment pane

- You can click the dropdown arrow to see a list of variables

- Or click on `states1` to see the data in spreadsheet format

---
# Starting an editable document

- Two common documents 
  - Script: minimalist place to save code
  - R Markdown: allows you to fluidly combine prose and code to export to all sorts of things [video](https://rmarkdown.rstudio.com/lesson-1.html)

- We will use R Markdown documents exclusively in this course

- But let's start with editing a script seeing the difference between the two can be helpful
  
---

# Scripts

- I will now demonstrate how to open a script

--

> **Open a script**

--

- Purpose of scripts is to save code without caring about a finished document

- Scripts support two elements:
  - Code
  - Comments (requires hashtag `#` so R knows what is a comment)
  
```{r}
# This is a comment. Below is some arbitrary math.
((5+5)/2)^2
```

---
# Using a script

- R interprets each line of a script as a command to execute

- To execute a line, click enter

- I will now demonstrate executing code in a script

--

> **Type some arbitrary math in your script and execute**

---
# Objects

- Objects are anything you tell R to temporarily save during a session. A dataset, a number, a list of numbers, etc.

- You can save any object to your computer or delete it when you close R. Deleting is fine as long as you saved the code that created the object(s).

- You should already have an object `states1`

---
# Creating an object

> **Add `x <-` to the arbitrary math in your script like I did below. Execute.**

```{r}
x <- ((5+5)/2)^2
```

--

- The `<-` symbol is called the **assignment operator**. It tells R to save the result of the thing on the right side as the name on the left side.

- The keyboard shortcut for the assignment is `Alt-` on PC or `Option-` on Mac.

---
# Why save an object?

- We create an object whenever we want to use something for later or save it as a file.

- Suppose `x` is *super* interesting but your boss wants to know what `x` is squared.

- You don't need to recreate `x`. You can just square `x` like below.

```{r}
x^2
```

- This becomes very useful when working with multiple datasets

---


---
# R Notebook

- We will usually use notebooks in this class

- Start a notebook--the template is informative

- The R Markdown cheatsheet is more informative
  - Go to Help->Cheatsheets->R Markdown Cheat Sheet
  
- Let's add a few generic headers to the template just to make some changes

---
# Knitting a notebook

- Knit the template to HTML 
  - Keyboard shortcut: `Cmd+Shift+K`
  - Or click on the `Knit` button at the top of your notebook (might display as `Preview` at first)

- Name the notebook `test` when R asks you to save it

- You should see two new files in your `files` pane (bottom-right) titled `test.Rmd` and `test.html`

- Click on `test.html` and select `open in browser`

---
# YAML header

- The YAML header tells R how to format the output

- Change the YAML to the following

```{r, eval=FALSE}
---
title:  'Test'
author: 'Your Name'
output: html_document
---
```

- Knit to HTML again

---
class: inverse, middle, center

# Let's create our first RLab notebook and upload to eLC

---
# RLAB1 Notebook

- Download the file `RLab1_Profile` on eLC and add to your `RLab1` project folder

- Rename the file `FirstName_LastName_Profile`

- Complete the instructions in the `RLab1_Profile` until you reach the competencies section

---
# Competencies

The National Association of Schools of Public Affairs and Administration (NASSPA) promotes six competencies in methods. Rate yourself on these competencies using the following scale:

1. Not familiar enough with the topic to rate myself
2. I have some competency but need improvement to achieve professional goals
3. Do not need improvement to achieve professional goals
4. Not to brag, but I'm basically an expert

---
# Adding code chunks

- Add a code chunk that executes some basic arithmetic

- Save the result to an object called `math`

---
# Packages

R loads with a lot of base functionality, but some things we want to do requires us to install or load additional packages into our R session. A package is simply a set of functions that augments the base functionality of R.

> Very important: Your notebook won't knit if you use code that requires a package that you haven't loaded inside of your notebook.

--

- Try this code:

```{r, eval=FALSE}
kable(states1)
```

```{r, eval=FALSE}
Error in kable(states1) : could not find function "kable"
```

---
# Loading packages

To load a package, it has to be installed on your computer. You only need to install a package once.

- Let's install the `knitr` package that contains the `kable` function

- Execute the following code in your **console**

```{r, eval=FALSE}
install.packages("knitr")
```

- Once installed, now we can load a package. Add this code to your notebook.

```{r}
library(knitr)
```

---
# Printing a table

- Add another code chunk

- Load the `states1` data

```{r, eval=FALSE}
load("states1.RData")
```

- Now try knitting to HTML

---
# Knitting in order

> Your notebook knits in the order of your code chunks. If you use a function on data that you load **below** the function, it's the same as not having the data loaded.

> If a code chunk depends on another chunk, then the latter needs to be done before the former.

--

- Copy-and-paste the `load` chunk above the `kable` chunk.

- Knit to HTML again. Does it work?

---
# Upload to eLC

- Upload your notebook (.Rmd file) and output (.html file) to the RLabs assignment dropbox on eLC
