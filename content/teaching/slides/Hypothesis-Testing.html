<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>PADP 7120 Data Applications in PA</title>
    <meta charset="utf-8" />
    <meta name="author" content="Alex Combs" />
    <script src="Hypothesis-Testing_files/header-attrs-2.11/header-attrs.js"></script>
    <link rel="stylesheet" href="mypres.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# PADP 7120 Data Applications in PA
## Hypothesis Testing
### Alex Combs
### UGA | SPIA | PADP
### Last updated: April 18, 2022

---

# Outline



- Hypothesis testing
- p-values
- Null distribution
- Reporting statistically significant results
- Practical significance

---
# Regression table

`$$MedHHInc = \beta_0 + \beta_1HSDegree + \beta_2 Urbanization + \epsilon$$` 




|term       | estimate| std_error| statistic| p_value| lower_ci| upper_ci|
|:----------|--------:|---------:|---------:|-------:|--------:|--------:|
|intercept  |  -115383|     22643|        -5|       0|  -160935|   -69830|
|hs         |     1993|       262|         8|       0|     1465|     2521|
|urban: low |    -6541|      1801|        -4|       0|   -10165|    -2918|

- Our goal is to better understand the `statistic` (less important) and `p_value` columns. 

---
class: inverse, center, middle

# What is a hypothesis test &amp; p-value?

---
# Hypotheses and p-values

**Hypothesis test:** "Is my result so unlikely that I can conclude with a sufficient level of confidence that there is evidence in support of my hypothesis?"

**p-value:** the probability of obtaining my result or more extreme in a world where the **null hypothesis** is actually true.

- The p-value helps us answer the hypothesis test

---
# Structure of hypothesis test

- Alternative hypothesis `\(H_A\)`

  - Claims there is evidence for the phenomenon you are interested in testing.

--

- Null hypothesis `\(H_0\)`

  - Claims there is no evidence; the opposite of the alternative

---
# Example

&lt;img src="Hypothesis-Testing_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;

&gt; **Run the all code chunks down to and including `promo-estimates`**

---
# Example

- Descriptive:

  - For our one sample, we have calculated the proportion of males promoted `\(p_M=0.88\)` and proportion of females promoted `\(p_F=0.58\)`
  - In this sample, the difference in proportion promoted is `\(p_M-p_F= 0.88-0.58=0.3\)` or 30 percentage points.

--

- Inference:

  - This is a sample of an unobserved population
  - And/or the counterfactual is unobservable
  - This sample provides us estimates of `\(P_M\)`, `\(P_F\)`, and `\(P_M-P_F\)`

---
# Example

`\(H_A\)`:  


`\(H_0\)`: 

---
# Hypothesis test conclusion

- What are the possible conclusions of a hypothesis test?

---
# Example

1. If results reject the null, then

  - We found statistically significant evidence that `\(P_M-P_F \neq 0\)`
  - Result of 0.3 is too improbable to be random noise

--

2. If results fail to reject the null
  - We did not find statistically significant evidence that `\(P_M-P_F \neq 0\)`
  - Result of 0.3 is not improbable enough
  - `\(P_M-P_F\lesseqqgtr0\)` ; we don't know which
  
--

- Can *never* conclude males and females *are* promoted equally `\(P_M-P_F = 0\)` from a hypothesis test. This is equivalent to accepting the null.

---
# Hypothesis test conclusions

&lt;img src="lectures_files/hypotest-tables.png" width="1079" style="display: block; margin: auto;" /&gt;

---
# What If We're Wrong

- Suppose our estimate of `\(P_M-P_F=?\)`, `\(p_M-p_F=0.3\)`, is so unlikely that we reject the null 

- Conclude that males and females are not promoted in equal proportions `\(P_M-P_F \neq 0\)`.

--

- Our estimate is a scientific guess around which we construct a range of plausible values we assume captures the parameter

--

- Our confidence interval could be 1 of the 5 out of 100 (assuming 95% CI) expected to fail to capture the parameter

---
# What If We're Wrong

- We may reject the null because our 95% CI does **not** contain 0, thus `\(P_M-P_F \neq 0\)`

--

- But our CI could be wrong and the true value is that `\(P_M-P_F = 0\)`
  - Type I error
  - False positive

---
# What If We're Wrong

- We may fail to reject the null because our 95% CI does include 0, thus we can't rule out with high enough confidence that `\(P_M-P_F \neq 0\)`

--

- But our CI could be wrong and the true value is that `\(P_M-P_F \neq 0\)`
  - Type II error
  - False negative

---
# Decision rule

- Common to choose a **significance level** of 5%, which is the same as choosing a **confidence level** of 95%.

  - Sometimes denoted `\(\alpha = 0.05\)` where `\(\alpha\)` is significance level

--

- If p-value is less than 0.05, we **reject** the null. If it is greater than or equal to 0.05, we **fail to reject** the null.

- If p-value `\(&lt;\alpha\)`, reject `\(H_0\)`

- If p-value `\(\geq \alpha\)`, fail to reject `\(H_0\)`

---
class: inverse, center, middle

# How do we know the probability of our result in a null world with one sample and not knowing if we live in a world where the null is true or not?

---
# Null distribution

&lt;img src="lectures_files/nulldist.png" width="1128" height="66%" style="display: block; margin: auto;" /&gt;

- We assume a null distribution, similar to the sampling distribution

- Null distribution is centered at 0 as if null were actually true

- Assuming null distribution is normal, we can then calculate the probability of our result

---
# Example

- If the null were true, then promotions would be random with respect to gender

  - On average, `\(P_M-P_F = 0\)`
  - Promotions and gender would share no correlation

--

- Let's use R to simulate a world where the null is true.

&gt; **Run all code chunks down to and including `null-estimate`**

---
# Example

- Let's repeat this random shuffling 1,000 times, calculating the difference in promotions between males and females each time.

- Then we could plot the 1,000 values as a histogram, giving us a distribution of differences between males and females in a world where promotions are random with respect to gender

&gt; **Run `null-distribution` code chunk**

---
# Null distribution

- The **LLN** tells us the center of the null distribution will settle around 0, and the **CLT** tells us that the null distribution will be normal just like the sampling distribution.

- Therefore, we can calculate the percent of values expected to fall outside some chosen number of standard errors by applying the **68-95-99 rule** to the null distribution.

--

&gt; **Run `null-center`, `null-se`, and `null-ci` code chunks.**

---
# Example p-value

- Our observed difference was 0.29

- How likely is this result if the null were actually true?

&gt; **Run `p-value-viz` and `p-value` code chunks**

---
# Chi-square test

- A typical analysis does not simulate a null hypothesis to obtain the p-value

- Instead, statistical tests that use standard theoretical formulas are used

--

- We have two nominal variables to test `\(\rightarrow\)` Chi-square test

&gt; **Run the `cross-tab` and `chi-square` code chunks**

- Does our conclusion change?

---
# Using an LPM

- We *could* use regression (LPM) for this

&gt; **Run the `lpm` code chunk**

- Does our conclusion change?

--

- Note the estimate is the same but p-value differs. This case pushes the limits of when a regression is appropriate to use.

- But if we wanted to control for additional variables, such as age or years employed, we are back to needing a regression model.

---
# Back to regression table


|term       |   estimate| std_error| statistic| p_value|    lower_ci|   upper_ci|
|:----------|----------:|---------:|---------:|-------:|-----------:|----------:|
|intercept  | -115382.50| 22643.377|    -5.096|   0.000| -160935.103| -69829.905|
|hs         |    1993.18|   262.416|     7.595|   0.000|    1465.267|   2521.093|
|urban: low |   -6541.47|  1801.233|    -3.632|   0.001|  -10165.082|  -2917.857|

- What are the null and alternative hypotheses? What is the result of the test?

- How many standard errors are our estimates from the center of the null distribution?

- What is the probability of obtaining our estimates or more extreme in a world where the null is true?

---
# Back to regression table


|term       |   estimate| std_error| statistic| p_value|    lower_ci|   upper_ci|
|:----------|----------:|---------:|---------:|-------:|-----------:|----------:|
|intercept  | -115382.50| 22643.377|    -5.096|   0.000| -160935.103| -69829.905|
|hs         |    1993.18|   262.416|     7.595|   0.000|    1465.267|   2521.093|
|urban: low |   -6541.47|  1801.233|    -3.632|   0.001|  -10165.082|  -2917.857|

There is statistically significant evidence that high school attainment is positively associated with median income in states. On average, state median income increases approximately $1,993 per 1 percentage point increase in the population with at least a high school degree, controlling for urbanicity. Using 95% confidence intervals, a 1 p.p. increase in high school attainment is associated with an increase of median income between \$1,465 and \$2,521. 

---
class: inverse, center, middle

# Practical significance

---
# Practical significance questions

1. What is the typical change in the explanatory variable associated with the statistically significant estimate?

--

2. Is the predicted change in the outcome due to a typical change in the explanatory variable meaningful?

--

3. Do the bounds of the confidence interval for the explanatory variable potentially change my answer?
  
---
# Example 1

&lt;img src="lectures_files/prac-sig1.png" width="66%" height="33%" style="display: block; margin: auto;" /&gt;

- Is the property tax result practically significant?

--

- Typical change (standard deviation) in property tax is $4

- Predicted change in average rent from a 1 SD increase in property tax is $400 (4 X 100), or at least 240 (4 X 60).

- At least a 24% increase relative to the mean of rent (240/1000) and 120% of SD in rent (240/200)...practically significant!

---
# Example 2

&lt;img src="lectures_files/prac-sig2.png" width="66%" height="33%" style="display: block; margin: auto;" /&gt;

- SD for property tax is now 0.04 instead of 4
- Is the property tax result practically significant?

--

- Typical change in property tax is now $0.04

- Predicted change in average rent from 1 SD increase in property tax = $4. Not practically significant.

- Confidence intervals do not change this conclusion.

---
# Example 3

&lt;img src="lectures_files/prac-sig3.png" width="66%" height="33%" style="display: block; margin: auto;" /&gt;

- SD of property tax back to 4 but CI has changed
- Is the property tax result practically significant?

--

- Same as first example and would definitely be practically significant if not for the 95% CI being so close to 0.

- Effect of a 1 SD increase in property tax could be as small as $8. Practical significance is questionable in this case.

---
# Example 4

&lt;img src="lectures_files/prac-sig4.png" width="66%" height="33%" style="display: block; margin: auto;" /&gt;

- Estimate and CI for property tax has changed
- Is the property tax result practically significant?

--

- Result is statistically insignificant. Effect of property tax is anywhere between -40 and 60, including 0. 

- Rare for statistical insignificance to have practical significance.

---
# Example 5

&lt;img src="lectures_files/prac-sig5.png" width="66%" height="33%" style="display: block; margin: auto;" /&gt;

- Estimate and CI has changed again
- Is the property tax result practically significant?

--

- The exception to the rule on the previous slide. Even though statistically insignificant, the CI is very precise around 0.

- A 1 SD increase in property tax ranges between -2.40 and 10.40 dollars. Plausible values do not translate to a meaningful change in average rent. Still useful.

---
# Practical significance from PS3




|                            |    Overall (N=50)     |
|:---------------------------|:---------------------:|
|**med_inc**                 |                       |
|&amp;nbsp;&amp;nbsp;&amp;nbsp;Mean (SD) | 54962.540 (9109.319)  |
|&amp;nbsp;&amp;nbsp;&amp;nbsp;Range     | 35521.000 - 76165.000 |
|**hs**                      |                       |
|&amp;nbsp;&amp;nbsp;&amp;nbsp;Mean (SD) |    86.908 (3.442)     |
|&amp;nbsp;&amp;nbsp;&amp;nbsp;Range     |    79.900 - 91.800    |


|term       |   estimate| std_error| statistic| p_value|    lower_ci|   upper_ci|
|:----------|----------:|---------:|---------:|-------:|-----------:|----------:|
|intercept  | -115382.50| 22643.377|    -5.096|   0.000| -160935.103| -69829.905|
|hs         |    1993.18|   262.416|     7.595|   0.000|    1465.267|   2521.093|
|urban: low |   -6541.47|  1801.233|    -3.632|   0.001|  -10165.082|  -2917.857|

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
